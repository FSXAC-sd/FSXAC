<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>ELEC 291 Magnetic Field Track Robot Final Report</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i&amp;subset=latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --node-fill: #ECECFF; --node-border: #CCCCFF; --note-fill: #fff5ad; --note-border: #aaaa33; --cluster-fill: #ffffde  !important; --cluster-border: #aaaa33  !important; }
.mermaid .label { color: var(--text-color); }
.node rect, .node circle, .node ellipse, .node polygon { fill: var(--node-fill); stroke: var(--node-border); stroke-width: 1px; }
.edgePath .path { stroke: var(--text-color); }
.edgeLabel { background-color: var(--bg-color); }
.cluster rect { fill: rgb(255, 255, 222) !important; rx: 4 !important; stroke: rgb(170, 170, 51) !important; stroke-width: 1px !important; }
.cluster text { fill: var(--text-color); }
.actor { stroke: var(--node-border); fill: var(--node-fill); }
text.actor { fill: var(--text-color); stroke: none; }
.actor-line { stroke: grey; }
.messageLine0 { stroke-width: 1.5; stroke: var(--text-color); }
.messageLine1 { stroke-width: 1.5; stroke: var(--text-color); }
#arrowhead { fill: var(--text-color); }
#crosshead path { fill: var(--text-color)  !important; stroke: var(--text-color)  !important; }
.messageText { fill: var(--text-color); stroke: none; }
.labelBox { stroke: var(--node-border); fill: var(--node-fill); }
.labelText { fill: var(--text-color); stroke: none; }
.loopText { fill: var(--text-color); stroke: none; }
.loopLine { stroke-width: 2; stroke: var(--node-border); }
.note { stroke: var(--note-border); fill: var(--note-fill); }
.noteText { fill: var(--text-color); stroke: none; font-size: 14px; }
.section { stroke: none; opacity: 0.2; }
.section0 { fill: rgba(102, 102, 255, 0.49); }
.section2 { fill: rgb(255, 244, 0); }
.section1, .section3 { fill: white; opacity: 0.2; }
.sectionTitle0 { fill: var(--text-color); }
.sectionTitle1 { fill: var(--text-color); }
.sectionTitle2 { fill: var(--text-color); }
.sectionTitle3 { fill: var(--text-color); }
.sectionTitle { text-anchor: start; font-size: 11px; }
.grid .tick { stroke: lightgrey; opacity: 0.3; shape-rendering: crispEdges; }
.grid path { stroke-width: 0; }
.today { fill: none; stroke: red; stroke-width: 2px; }
.task { stroke-width: 2; }
.taskText { text-anchor: middle; font-size: 11px; }
.taskTextOutsideRight { fill: black; text-anchor: start; font-size: 11px; }
.taskTextOutsideLeft { fill: black; text-anchor: end; font-size: 11px; }
.taskText0, .taskText1, .taskText2, .taskText3 { fill: white; }
.task0, .task1, .task2, .task3 { fill: rgb(138, 144, 221); stroke: rgb(83, 79, 188); }
.taskTextOutside0, .taskTextOutside2 { fill: var(--text-color); }
.taskTextOutside1, .taskTextOutside3 { fill: var(--text-color); }
.active0, .active1, .active2, .active3 { fill: rgb(191, 199, 255); stroke: rgb(83, 79, 188); }
.activeText0, .activeText1, .activeText2, .activeText3 { fill: black !important; }
.done0, .done1, .done2, .done3 { stroke: grey; fill: lightgrey; stroke-width: 2; }
.doneText0, .doneText1, .doneText2, .doneText3 { fill: black !important; }
.crit0, .crit1, .crit2, .crit3 { stroke: rgb(255, 136, 136); fill: red; stroke-width: 2; }
.activeCrit0, .activeCrit1, .activeCrit2, .activeCrit3 { stroke: rgb(255, 136, 136); fill: rgb(191, 199, 255); stroke-width: 2; }
.doneCrit0, .doneCrit1, .doneCrit2, .doneCrit3 { stroke: rgb(255, 136, 136); fill: lightgrey; stroke-width: 2; cursor: pointer; shape-rendering: crispEdges; }
.doneCritText0, .doneCritText1, .doneCritText2, .doneCritText3 { fill: black !important; }
.activeCritText0, .activeCritText1, .activeCritText2, .activeCritText3 { fill: black !important; }
.titleText { text-anchor: middle; font-size: 18px; fill: black; }
.node text { font-size: 14px; }
div.mermaidTooltip { position: absolute; text-align: center; max-width: 200px; padding: 2px; font-size: 12px; background: rgb(255, 255, 222); border: 1px solid rgb(170, 170, 51); border-radius: 2px; pointer-events: none; z-index: 100; }
#write .md-diagram-panel .md-diagram-panel-preview div { width: initial; }


:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --bg-color: #ffffff; --text-color: #404a4e; --md-char-color: #C7C5C5; --meta-content-color: #5b808d; --primary-color: #428bca; --primary-btn-border-color: #285e8e; --primary-btn-text-color: #fff; --window-border: 1px solid #eee; --active-file-border-color: #888; --active-file-text-color: white; --active-file-bg-color: #404a4e; --side-bar-bg-color: #fafafa; --item-hover-bg-color: #808a8e; --item-hover-text-color: inherit; --monospace-font: "Fira Code", Consolas, "Liberation Mono", Courier, monospace; --font: "Open Sans", Helvetica, Arial, "Microsoft Yahei", sans-serif; --header-font: "HK Grotesk", Helvetica, Arial, "Microsoft Yahei", sans-serif; --header-color: #202828; --link-color: #4183C4; --control-text-color: #777; --meta-text-color: #aaa; --border-color: #ddd; --blockquote-width: 6px; --table-head-width: 3px; }
@media print {
  html { font-size: 10px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
  h1 { break-before: page; }
  h1:first-of-type { break-before: avoid; }
  body { line-height: 1.2; }
  code, tt { border-radius: 2px; padding: 1px 1px 0px; font-size: 0.8em; }
}
html { font-size: 16px; }
body { font-family: "Open Sans", Helvetica, Arial, "Microsoft Yahei", sans-serif; line-height: 1.35; }
#write { max-width: 960px; padding: 20px 1em 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
#write pre.md-meta-block { padding: 1rem; line-height: 1.1; background-color: transparent; border: 2px dotted var(--border-color); color: var(--meta-text-color); margin-bottom: 2em; margin-top: 0px !important; }
a { color: var(--link-color); text-decoration: none; }
h1, h2, h3, h4, h5, h6 { margin-top: 1rem; margin-bottom: 1rem; line-height: 1.2; font-family: "HK Grotesk", Helvetica, Arial, "Microsoft Yahei", sans-serif; font-weight: bold; color: var(--header-color); letter-spacing: -0.45px; word-spacing: 0.5px; }
h1 { font-size: 3em; border-bottom: 1px solid var(--text-color); }
h2 { font-size: 2em; border-bottom: 1px dotted var(--text-color); }
h3 { font-size: 1.5em; }
h4 { font-size: 1.25em; }
h5 { font-size: 1.15em; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code { font-size: inherit; }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-top: 1px solid var(--border-color); border-right: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); border-image: 1px solid var(--border-color); border-left: var(--blockquote-width) solid var(--control-text-color); border-radius: var(--blockquote-width); padding: 8px 8px 8px 1em; }
blockquote blockquote { padding-right: 2px; }
blockquote.primary { border-left-color: rgb(65, 131, 196); }
blockquote.info { border-left-color: darkcyan; }
blockquote.success { border-left-color: darkgreen; }
blockquote.warning { border-left-color: rgb(253, 151, 31); }
blockquote.danger { border-left-color: crimson; }
div[style^="callout:"] { border-top: 1px solid var(--border-color); border-right: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); border-image: 1px solid var(--border-color); border-radius: var(--blockquote-width); border-left: var(--blockquote-width) solid var(--control-text-color); padding: 8px 8px 8px 1em; }
div[style="callout:default"] { border-left-color: var(--control-text-color); }
div[style="callout:primary"] { border-left-color: rgb(65, 131, 196); }
div[style="callout:primary"] strong, div[style="callout:primary"] b { color: rgb(65, 131, 196); }
div[style="callout:info"] { border-left-color: darkcyan; }
div[style="callout:info"] strong, div[style="callout:info"] b { color: darkcyan; }
div[style="callout:success"] { border-left-color: darkgreen; }
div[style="callout:success"] strong, div[style="callout:success"] b { color: darkgreen; }
div[style="callout:warning"] { border-left-color: rgb(253, 151, 31); }
div[style="callout:warning"] strong, div[style="callout:warning"] b { color: rgb(253, 151, 31); }
div[style="callout:danger"] { border-left-color: crimson; }
div[style="callout:danger"] strong, div[style="callout:danger"] b { color: crimson; }
table { padding: 0px; word-break: initial; border-bottom: var(--table-head-width) solid var(--text-color); }
table tr { border-top: 1px solid var(--text-color); margin: 0px; padding: 0px; }
table tr:first-child { border-top: 0px; }
table tr th { font-weight: bold; border-top: 0px; border-right: 0px; border-left: 0px; border-image: initial; border-bottom: var(--table-head-width) solid var(--text-color); text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
mark { background: rgb(255, 255, 187); border-radius: 3px; padding: 0px 4px; }
.md-fences, code, tt { border: 1px solid var(--border-color); border-radius: 3px; color: var(--text-color); font-family: "Fira Code", Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.03) 0px 4px 4px 0px; }
.cm-s-inner { background: rgb(253, 253, 253); color: rgb(17, 17, 17); }
.cm-s-inner div.CodeMirror-cursor { border-left: 2px solid rgb(17, 17, 17); }
.cm-s-inner .CodeMirror-selected { background: rgb(183, 220, 232); }
.cm-s-inner .cm-comment { color: rgb(34, 162, 31); background: rgba(219, 243, 205, 0.376); }
.cm-s-inner .cm-keyword { color: rgb(251, 102, 32); }
.cm-s-inner .cm-string { color: rgb(21, 134, 210); }
.cm-s-inner .cm-variable-2 { color: rgb(249, 38, 114); }
.cm-s-inner .cm-property { color: rgb(19, 128, 109); }
.cm-s-inner .cm-atom { color: rgb(138, 76, 255); }
.cm-s-inner .cm-number { color: rgb(138, 76, 255); }
.cm-s-inner .cm-operator { color: rgb(251, 102, 32); }
.cm-s-inner .CodeMirror-linenumber { color: rgb(34, 162, 31); }
.task-list { padding-left: 0px; }
.task-list-item { padding-left: 32px; }
.md-image > .md-meta { border: 1px solid var(--border-color); border-radius: 3px; font-family: var(--monospace-font); padding: 2px 4px 0px; font-size: 0.9em; color: inherit; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
p[style^="caption:"] { text-align: center; font-style: italic; }
#write span.md-emoji-span { position: relative; top: -0.14em; }






</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>Magnetic Field Track Robot Final Report</h1><p><em>April 6, 2017</em></p><p><strong>ELEC 291 - Team B6</strong></p><p>Nicholas (Scott) Beaulieu
Geoff Goodwin-Wilson
Muchen He
Larry Liu
Lufei Liu
Wenoa Pauline Teves</p><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0">Magnetic Field Track Robot Final Report</a></span><span class="md-toc-item md-toc-h2" data-ref="n7"><a class="md-toc-inner" href="#header-n7">1. Introduction</a></span><span class="md-toc-item md-toc-h3" data-ref="n8"><a class="md-toc-inner" href="#header-n8">Objectives</a></span><span class="md-toc-item md-toc-h3" data-ref="n12"><a class="md-toc-inner" href="#header-n12">Specifications</a></span><span class="md-toc-item md-toc-h4" data-ref="n16"><a class="md-toc-inner" href="#header-n16">Parts List</a></span><span class="md-toc-item md-toc-h4" data-ref="n18"><a class="md-toc-inner" href="#header-n18">Software Features</a></span><span class="md-toc-item md-toc-h5" data-ref="n19"><a class="md-toc-inner" href="#header-n19">Robot</a></span><span class="md-toc-item md-toc-h5" data-ref="n49"><a class="md-toc-inner" href="#header-n49">Guideline Controller</a></span><span class="md-toc-item md-toc-h2" data-ref="n70"><a class="md-toc-inner" href="#header-n70">2. Investigation</a></span><span class="md-toc-item md-toc-h3" data-ref="n71"><a class="md-toc-inner" href="#header-n71">Idea Generation</a></span><span class="md-toc-item md-toc-h3" data-ref="n74"><a class="md-toc-inner" href="#header-n74">Design Investigation</a></span><span class="md-toc-item md-toc-h3" data-ref="n76"><a class="md-toc-inner" href="#header-n76">Data Collection</a></span><span class="md-toc-item md-toc-h3" data-ref="n83"><a class="md-toc-inner" href="#header-n83">Data Synthesis</a></span><span class="md-toc-item md-toc-h3" data-ref="n86"><a class="md-toc-inner" href="#header-n86">Analysis of Results</a></span><span class="md-toc-item md-toc-h2" data-ref="n88"><a class="md-toc-inner" href="#header-n88">3. Design</a></span><span class="md-toc-item md-toc-h3" data-ref="n89"><a class="md-toc-inner" href="#header-n89">Use of Design Process</a></span><span class="md-toc-item md-toc-h3" data-ref="n91"><a class="md-toc-inner" href="#header-n91">Needs and Constraints Identification</a></span><span class="md-toc-item md-toc-h3" data-ref="n99"><a class="md-toc-inner" href="#header-n99">Problem Specification</a></span><span class="md-toc-item md-toc-h3" data-ref="n101"><a class="md-toc-inner" href="#header-n101">Solution Generation</a></span><span class="md-toc-item md-toc-h3" data-ref="n108"><a class="md-toc-inner" href="#header-n108">Solution Evaluation</a></span><span class="md-toc-item md-toc-h3" data-ref="n176"><a class="md-toc-inner" href="#header-n176">Detailed Design</a></span><span class="md-toc-item md-toc-h3" data-ref="n190"><a class="md-toc-inner" href="#header-n190">Guideline Wire Controller (Guide Wire Generator)</a></span><span class="md-toc-item md-toc-h4" data-ref="n191"><a class="md-toc-inner" href="#header-n191">Overview</a></span><span class="md-toc-item md-toc-h4" data-ref="n195"><a class="md-toc-inner" href="#header-n195">Signal Generation</a></span><span class="md-toc-item md-toc-h4" data-ref="n198"><a class="md-toc-inner" href="#header-n198">Guide Wire Communication</a></span><span class="md-toc-item md-toc-h4" data-ref="n202"><a class="md-toc-inner" href="#header-n202">User I/O</a></span><span class="md-toc-item md-toc-h3" data-ref="n205"><a class="md-toc-inner" href="#header-n205">Magnetic Field Tracking Robot</a></span><span class="md-toc-item md-toc-h4" data-ref="n206"><a class="md-toc-inner" href="#header-n206">Tank Circuit</a></span><span class="md-toc-item md-toc-h4" data-ref="n210"><a class="md-toc-inner" href="#header-n210">Commands Interpretation</a></span><span class="md-toc-item md-toc-h5" data-ref="n211"><a class="md-toc-inner" href="#header-n211">Hardware</a></span><span class="md-toc-item md-toc-h5" data-ref="n216"><a class="md-toc-inner" href="#header-n216">Software</a></span><span class="md-toc-item md-toc-h4" data-ref="n222"><a class="md-toc-inner" href="#header-n222">Robot Controller</a></span><span class="md-toc-item md-toc-h4" data-ref="n283"><a class="md-toc-inner" href="#header-n283">Motor Adjustments</a></span><span class="md-toc-item md-toc-h3" data-ref="n290"><a class="md-toc-inner" href="#header-n290">Solution Assessment</a></span><span class="md-toc-item md-toc-h2" data-ref="n296"><a class="md-toc-inner" href="#header-n296">4. Lifelong Learning</a></span><span class="md-toc-item md-toc-h2" data-ref="n306"><a class="md-toc-inner" href="#header-n306">5. Conclusion</a></span><span class="md-toc-item md-toc-h2" data-ref="n314"><a class="md-toc-inner" href="#header-n314">6. Bibliography</a></span><span class="md-toc-item md-toc-h2" data-ref="n321"><a class="md-toc-inner" href="#header-n321">Appendix</a></span><span class="md-toc-item md-toc-h3" data-ref="n322"><a class="md-toc-inner" href="#header-n322">A. Detailed Parts List</a></span><span class="md-toc-item md-toc-h4" data-ref="n323"><a class="md-toc-inner" href="#header-n323">Microcontroller</a></span><span class="md-toc-item md-toc-h4" data-ref="n340"><a class="md-toc-inner" href="#header-n340">Robot Assembly</a></span><span class="md-toc-item md-toc-h4" data-ref="n370"><a class="md-toc-inner" href="#header-n370">Robot</a></span><span class="md-toc-item md-toc-h4" data-ref="n487"><a class="md-toc-inner" href="#header-n487">Guide Wire Generator</a></span><span class="md-toc-item md-toc-h3" data-ref="n540"><a class="md-toc-inner" href="#header-n540">B. Guideline Controller Circuit</a></span><span class="md-toc-item md-toc-h3" data-ref="n545"><a class="md-toc-inner" href="#header-n545">C. Robot Circuit</a></span><span class="md-toc-item md-toc-h3" data-ref="n554"><a class="md-toc-inner" href="#header-n554">D. Robot Logic</a></span><span class="md-toc-item md-toc-h3" data-ref="n557"><a class="md-toc-inner" href="#header-n557">E. Test Data</a></span><span class="md-toc-item md-toc-h3" data-ref="n558"><a class="md-toc-inner" href="#header-n558">Turn Test Data</a></span><span class="md-toc-item md-toc-h3" data-ref="n606"><a class="md-toc-inner" href="#header-n606">Forward Consistency Test Data</a></span><span class="md-toc-item md-toc-h3" data-ref="n645"><a class="md-toc-inner" href="#header-n645">Backward Consistency Test Data</a></span><span class="md-toc-item md-toc-h3" data-ref="n684"><a class="md-toc-inner" href="#header-n684">F. Software Source Code</a></span></p></div><h2><a name='header-n7' class='md-header-anchor '></a>1. Introduction</h2><h3><a name='header-n8' class='md-header-anchor '></a>Objectives</h3><p>The objective of this project is to design, build, program, and test an autonomous robot which is controlled using the magnetic field generated by a guide wire.</p><div class="md-diagram-panel"><svg id="mermaidChart0" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 340 537" style="max-width:340px;"><style></style><style>#mermaidChart0 {
    color: rgb(64, 74, 78);
    font: normal normal 400 normal 14.4px / 19.44px "Fira Code", Consolas, "Liberation Mono", Courier, monospace;
  }</style><g transform="translate(32, 32)"><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M138,59L138,93.5L138,128" marker-end="url(#arrowhead24)" style="fill:none"></path><defs><marker id="arrowhead24" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M138,167L138,192L138,217" marker-end="url(#arrowhead25)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead25" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M138,256L138,281L138,306" marker-end="url(#arrowhead26)" style="fill:none"></path><defs><marker id="arrowhead26" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M138,345L138,379.5L138,414" marker-end="url(#arrowhead27)" style="fill:none"></path><defs><marker id="arrowhead27" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(138,93.5)" style="opacity: 1;"><g transform="translate(-82.0859375,-9.5)" class="label"><foreignObject width="164.171875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">16kHz Square Signal</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(138,379.5)" style="opacity: 1;"><g transform="translate(-12.9609375,-9.5)" class="label"><foreignObject width="25.921875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">PWM</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="A" transform="translate(138,39.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-118" y="-19.5" width="236" height="39"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-108,-9.5)"><foreignObject width="216" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Guideline Microcontroller</div></foreignObject></g></g></g><g class="node" id="B" transform="translate(138,147.5)" style="opacity: 1;"><rect rx="5" ry="5" x="-48.8828125" y="-19.5" width="97.765625" height="39"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-38.8828125,-9.5)"><foreignObject width="77.765625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Guidewire</div></foreignObject></g></g></g><g class="node" id="C" transform="translate(138,236.5)" style="opacity: 1;"><rect rx="5" ry="5" x="-96.40625" y="-19.5" width="192.8125" height="39"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-86.40625,-9.5)"><foreignObject width="172.8125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Robot's Tank Circuit</div></foreignObject></g></g></g><g class="node" id="D" transform="translate(138,325.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-100.7265625" y="-19.5" width="201.453125" height="39"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-90.7265625,-9.5)"><foreignObject width="181.453125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Robot Microcontroller</div></foreignObject></g></g></g><g class="node" id="E" transform="translate(138,433.5)" style="opacity: 1;"><rect rx="5" ry="5" x="-61.84375" y="-19.5" width="123.6875" height="39"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-51.84375,-9.5)"><foreignObject width="103.6875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Robot Motors</div></foreignObject></g></g></g></g></g></g></svg></div><p><em>Figure 1.1: Project flow chart</em></p><h3><a name='header-n12' class='md-header-anchor '></a>Specifications</h3><p><strong>Guideline wire frequency</strong>: 16.0 kHz</p><p><strong>Guideline wire communication baud-rate</strong>: 15.625 (64.00 ms per bit)</p><p><strong>Battery life</strong>: ~20 minutes (drawing 500mA on a 9V alkaline battery)</p><h4><a name='header-n16' class='md-header-anchor '></a>Parts List</h4><p>A detailed parts list is included in the appendix.</p><h4><a name='header-n18' class='md-header-anchor '></a>Software Features</h4><h5><a name='header-n19' class='md-header-anchor '></a>Robot</h5><ul><li><p>Reads commands sent through via the wire&#39;s magnetic field as binary (self made UART)</p></li><li><p>Supports interpretation from binary up to 4 bits</p></li><li><p>Supports the following commands (transmitted via binary as mentioned above):</p><ul><li>Stop</li><li>Turn left at the next detected intersection</li><li>Turn right at the next detected intersection</li><li>Track forward</li><li>Track backward</li><li>U-turn (rotates 180 degrees)</li></ul></li><li><p>Proximity detection using sonar sensor</p><ul><li>Stops the robot when objects directly in front of the robot is detected</li></ul></li><li><p>LED Matrix Visualizer that displays bitmapped pixel art that associates to the command</p></li><li><p>Blinker LEDs to simulate turn signal</p></li></ul><h5><a name='header-n49' class='md-header-anchor '></a>Guideline Controller</h5><ul><li><p>Generates 16kHz square wave in the guideline wire for the robot to follow</p></li><li><p>Sends commands to the robot using binary by switching the 16kHz signal on or off (self made UART)</p></li><li><p>Sends the binary for the following commands:</p><ul><li>Stop</li><li>Turn left at the next detected intersection</li><li>Turn right at the next detected intersection</li><li>Track forward</li><li>Track backward</li><li>U-turn (rotates 180 degrees)</li></ul></li></ul><h2><a name='header-n70' class='md-header-anchor '></a>2. Investigation</h2><h3><a name='header-n71' class='md-header-anchor '></a>Idea Generation</h3><p>Our team generated ideas by going through the steps of the design process (i.e. identifying requirements, generating multiple ideas that satisfied these requirements, and choosing the most efficient). In this case, that meant that we wanted our robot to move smoothly, quickly and receive data at the fastest possible frequency.</p><p>Ideally, we also wanted designs that were modular, consisting of independent components. This would enable a better work flow by allowing better communication and collaboration within the team as parts of the project would not depend on each other.</p><h3><a name='header-n74' class='md-header-anchor '></a>Design Investigation</h3><p>Our team gathered data through online research and testing. We also used the lab tools to gather data, which is expanded on below in <a href='#header-n76'><em>Data Collection</em></a>.</p><h3><a name='header-n76' class='md-header-anchor '></a>Data Collection</h3><p>Referring to online data-sheets when building our potential design, we would test expected outputs using tools provided to us in the lab. Below are some of the ways we used the tools in Macleod Lab:</p><p><strong>Multimeter</strong>
We used the multimeter to measure voltages of various components of our circuits-such as the outputs of the operational amplifiers (OP Amps) <sup class='md-footnote'><a href='#dfref-footnote-1' name='ref-footnote-1'>1</a></sup> and the comparators <sup class='md-footnote'><a href='#dfref-footnote-2' name='ref-footnote-2'>2</a></sup> and to check the validity and continuity of our circuit prototypes.</p><p><strong>Function Generator</strong>
We used the function generator to generate square waves through our guide wire to simulate a 16.0 kHz signal in order to test our tracking robot.</p><p><strong>Oscilloscope</strong>
With our capacitance and inductance values; the theoretical resonance frequency was 16.0 kHz. We used the oscilloscope to ensure that this was true.</p><p><strong>Power Supply</strong>
We used the power supply to save batteries and to determine the amount of current that was being drawn out of our circuit at certain voltage levels. The power supply was also used to test our design’s characteristics, such as the speed of the motors, at different levels of power.</p><p>Using the same methods outlined above to analyze potential designs, we tested various circuit components. We used the oscilloscope to read the accuracy of our peak detectors, ensuring that the signal was DC, and to debug the output signals throughout the circuit. We then checked with the multimeter to confirm voltages and frequencies.</p><h3><a name='header-n83' class='md-header-anchor '></a>Data Synthesis</h3><p>While testing our design, we would observe readings on the oscilloscope and multimeter, values on PuTTy and the physical movement of our robot.</p><p>When testing our tank circuits, we would test the outputs before implementing it into our main robot. The most effective way our team tested the tank circuits was to hold the inductor <sup class='md-footnote'><a href='#dfref-footnote-3' name='ref-footnote-3'>3</a></sup> over a wire with current and observe the DC signal displayed on an oscilloscope. From this we observed that the amplitude of the voltage increased very rapidly as the wire was brought closer to the inductor. This was especially apparent as the inductor followed an exponential curve relative to distance, and would increase rapidly as it gets within millimeters of the inductor.</p><h3><a name='header-n86' class='md-header-anchor '></a>Analysis of Results</h3><p>Our team appraised the validity of conclusions through the actual execution of our robot. When testing the commands of our robot (forwards, backwards, turns, etc), we agreed with our design when the robot would execute our instructed command throughout a consistent number of test cases. This is explained further in <a href='#header-n88'><em>Section 3</em></a> under <a href='#header-n290'><em>Solution Assessment</em></a>.</p><h2><a name='header-n88' class='md-header-anchor '></a>3. Design</h2><h3><a name='header-n89' class='md-header-anchor '></a>Use of Design Process</h3><p>Using the design process, we generated multiple ideas for potential designs. This gave our team the opportunity to discuss which design we thought would be best for our robot. </p><h3><a name='header-n91' class='md-header-anchor '></a>Needs and Constraints Identification</h3><p>The needs for the magnetic track robot were outlined according to our lab manual. In addition to these requirements, some of the needs our team identified for customers are stated below:</p><ul><li class='md-task-list-item task-list-item task-list-done' ><input type='checkbox' disabled='disabled' checked/><p>Ease of use: The ability to communicate to the robot through the guide wire should be quick and simple</p></li><li class='md-task-list-item task-list-item task-list-done' ><input type='checkbox' disabled='disabled' checked/><p>Runs smoothly and reliably</p></li></ul><p>Constraints of our robot were also outlined in our lab manual (i.e. the guideline controller operating at a single frequency). </p><h3><a name='header-n99' class='md-header-anchor '></a>Problem Specification</h3><p>To increase ease of use, our team implemented an LED matrix <sup class='md-footnote'><a href='#dfref-footnote-4' name='ref-footnote-4'>4</a></sup> that displays the instruction sent to the robot. This allows the user to easily visualize how the robot executes instruction.</p><h3><a name='header-n101' class='md-header-anchor '></a>Solution Generation</h3><p>Using <strong>Buttons</strong> on guideline wire controller is used to send commands:</p><p>To communicate with the robot (i.e send a command to turn left, right, stop, 180 degrees), a potential solution was to install buttons <sup class='md-footnote'><a href='#dfref-footnote-5' name='ref-footnote-5'>5</a></sup> on the guide wire generator; each button sending a specific command when pressed. </p><p>Using <strong>Joystick</strong> <sup class='md-footnote'><a href='#dfref-footnote-6' name='ref-footnote-6'>6</a></sup> to send commands:</p><p>Similarly, we would install a joystick to send commands instead. The direction on the joystick would send the respective command (see <em>Figure 3.1</em>).</p><p><img src='assets/ELEC291P2 Report/g4202.png' alt='g4202' referrerPolicy='no-referrer' /></p><p><em>Figure 3.1: Joystick Controls</em></p><h3><a name='header-n108' class='md-header-anchor '></a>Solution Evaluation</h3><p>The following tables detail our attempts at different configurations for our inductors as well different methods of PWM for our motors.</p><figure><table><thead><tr><th style='text-align:right;' >Design Concept</th><th style='text-align:left;' >Two (2) Inductors</th><th style='text-align:left;' >Three (3) Inductors</th><th style='text-align:left;' >Four (4) Inductors</th></tr></thead><tbody><tr><td style='text-align:right;' ><strong>Description</strong></td><td style='text-align:left;' >Two tank circuits at the front of the robot set at a 45 degree angle</td><td style='text-align:left;' >Two inductors parallel to the guide wire and one perpendicular</td><td style='text-align:left;' >Two inductors at the front set at a 45 degree angle and two inductors at the back at a 45 degree angle.</td></tr><tr><td style='text-align:right;' ><strong>Forward Tracking</strong></td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td></tr><tr><td style='text-align:right;' ><strong>Reverse Tracking</strong></td><td style='text-align:left;' >Inoperative</td><td style='text-align:left;' >Inaccurate</td><td style='text-align:left;' >Accurate</td></tr><tr><td style='text-align:right;' ><strong>Intersections</strong></td><td style='text-align:left;' >Detects intersections with inductors on a 45 degree angle. Navigates intersections with high error. Trouble understanding current position due to inductor positioning</td><td style='text-align:left;' >Detects intersections; Navigates intersections</td><td style='text-align:left;' >Detects intersections with inductors on a 45 degree angle; Navigates intersection by measuring voltage on opposite inductors; Able to understand position and correct errors</td></tr><tr><td style='text-align:right;' ><strong>U-Turn</strong></td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td></tr><tr><td style='text-align:right;' ><strong>Stop</strong></td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td><td style='text-align:left;' >Accurate</td></tr><tr><td style='text-align:right;' ><strong>Remark</strong></td><td style='text-align:left;' >Easiest to implement into software</td><td style='text-align:left;' >More hardware than 2 inductors</td><td style='text-align:left;' >More accurate tracking when implemented in software due to more inductors tracking positioning of robot on track; Uses the most hardware</td></tr></tbody></table></figure><p><em>Table 3.1: Testing Different Inductor Configurations</em></p><p><strong>Design Decision</strong>
We chose to use 4 Inductors because it would track the most accurately and although it uses the most hardware, tracking backwards would be easier because it would be the dual of tracking forwards.</p><figure><table><thead><tr><th style='text-align:right;' >PWN Function [%]</th><th><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.155ex" height="3.869ex" viewBox="0 -1059.5 7816.6 1665.8" role="img" focusable="false" style="vertical-align: -1.408ex;"><defs><path stroke-width="0" id="E3-MJMATHI-3BB" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path stroke-width="0" id="E3-MJMATHI-4C" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path stroke-width="0" id="E3-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E3-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="0" id="E3-MJMAIN-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path stroke-width="0" id="E3-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E3-MJMATHI-56" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path stroke-width="0" id="E3-MJMAIN-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path stroke-width="0" id="E3-MJMATHI-52" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E3-MJMATHI-3BB" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-4C" x="824" y="-213"></use><use xlink:href="#E3-MJMAIN-3D" x="1442" y="0"></use><g transform="translate(2498,0)"><use xlink:href="#E3-MJMAIN-31"></use><use xlink:href="#E3-MJMAIN-30" x="500" y="0"></use><use xlink:href="#E3-MJMAIN-30" x="1000" y="0"></use></g><use xlink:href="#E3-MJMAIN-D7" x="4220" y="0"></use><g transform="translate(4998,0)"><g transform="translate(342,0)"><rect stroke="none" width="2356" height="60" x="0" y="220"></rect><g transform="translate(766,511)"><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E3-MJMATHI-4C" x="824" y="-213"></use></g><g transform="translate(60,-388)"><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E3-MJMATHI-4C" x="824" y="-213"></use><use transform="scale(0.707)" xlink:href="#E3-MJMAIN-2B" x="1164" y="0"></use><g transform="translate(1373,0)"><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E3-MJMATHI-52" x="824" y="-213"></use></g></g></g></g></g></svg></span><script type="math/tex">\lambda_L=100\times\frac{V_L}{V_L+V_R}</script></th><th><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.177ex" height="4.805ex" viewBox="0 -1260.9 8687.4 2068.6" role="img" focusable="false" style="vertical-align: -1.876ex;"><defs><path stroke-width="0" id="E4-MJMATHI-3BB" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path stroke-width="0" id="E4-MJMATHI-4C" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path stroke-width="0" id="E4-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E4-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="0" id="E4-MJMAIN-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path stroke-width="0" id="E4-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E4-MJMATHI-56" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path stroke-width="0" id="E4-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path stroke-width="0" id="E4-MJMAIN-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path stroke-width="0" id="E4-MJMAIN-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path stroke-width="0" id="E4-MJMATHI-52" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path stroke-width="0" id="E4-MJMAIN-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E4-MJMATHI-3BB" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E4-MJMATHI-4C" x="824" y="-213"></use><use xlink:href="#E4-MJMAIN-3D" x="1442" y="0"></use><g transform="translate(2498,0)"><use xlink:href="#E4-MJMAIN-31"></use><use xlink:href="#E4-MJMAIN-30" x="500" y="0"></use><use xlink:href="#E4-MJMAIN-30" x="1000" y="0"></use></g><use xlink:href="#E4-MJMAIN-D7" x="4220" y="0"></use><g transform="translate(4998,0)"><g transform="translate(342,0)"><rect stroke="none" width="3226" height="60" x="0" y="220"></rect><g transform="translate(1161,584)"><use transform="scale(0.707)" xlink:href="#E4-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E4-MJMAIN-32" x="1166" y="579"></use><use transform="scale(0.5)" xlink:href="#E4-MJMATHI-4C" x="824" y="-358"></use></g><g transform="translate(60,-575)"><use transform="scale(0.707)" xlink:href="#E4-MJMAIN-28" x="0" y="0"></use><g transform="translate(275,0)"><use transform="scale(0.707)" xlink:href="#E4-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E4-MJMATHI-4C" x="824" y="-213"></use></g><use transform="scale(0.707)" xlink:href="#E4-MJMAIN-2B" x="1553" y="0"></use><g transform="translate(1648,0)"><use transform="scale(0.707)" xlink:href="#E4-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E4-MJMATHI-52" x="824" y="-213"></use></g><g transform="translate(2511,0)"><use transform="scale(0.707)" xlink:href="#E4-MJMAIN-29" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E4-MJMAIN-32" x="550" y="674"></use></g></g></g></g></g></svg></span><script type="math/tex">\lambda_L=100\times\frac{V_L^2}{(V_L+V_R)^2}</script></th><th><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.277ex" height="4.805ex" viewBox="0 -1260.9 7438.6 2068.6" role="img" focusable="false" style="vertical-align: -1.876ex;"><defs><path stroke-width="0" id="E5-MJMATHI-3BB" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path stroke-width="0" id="E5-MJMATHI-4C" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path stroke-width="0" id="E5-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E5-MJMAIN-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path stroke-width="0" id="E5-MJMAIN-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path stroke-width="0" id="E5-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E5-MJMATHI-56" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path stroke-width="0" id="E5-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path stroke-width="0" id="E5-MJMAIN-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path stroke-width="0" id="E5-MJMATHI-52" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E5-MJMATHI-3BB" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E5-MJMATHI-4C" x="824" y="-213"></use><use xlink:href="#E5-MJMAIN-3D" x="1442" y="0"></use><g transform="translate(2498,0)"><use xlink:href="#E5-MJMAIN-37"></use><use xlink:href="#E5-MJMAIN-35" x="500" y="0"></use></g><use xlink:href="#E5-MJMAIN-D7" x="3720" y="0"></use><g transform="translate(4498,0)"><g transform="translate(342,0)"><rect stroke="none" width="2478" height="60" x="0" y="220"></rect><g transform="translate(787,584)"><use transform="scale(0.707)" xlink:href="#E5-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E5-MJMAIN-32" x="1166" y="579"></use><use transform="scale(0.5)" xlink:href="#E5-MJMATHI-4C" x="824" y="-358"></use></g><g transform="translate(60,-528)"><use transform="scale(0.707)" xlink:href="#E5-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E5-MJMAIN-32" x="1166" y="579"></use><use transform="scale(0.5)" xlink:href="#E5-MJMATHI-4C" x="824" y="-358"></use><use transform="scale(0.707)" xlink:href="#E5-MJMAIN-2B" x="1278" y="0"></use><g transform="translate(1454,0)"><use transform="scale(0.707)" xlink:href="#E5-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E5-MJMAIN-32" x="1166" y="579"></use><use transform="scale(0.5)" xlink:href="#E5-MJMATHI-52" x="824" y="-358"></use></g></g></g></g></g></svg></span><script type="math/tex">\lambda_L=75\times\frac{V_L^2}{V_L^2+V_R^2}</script></th></tr></thead><tbody><tr><td style='text-align:right;' ><strong>Description</strong></td><td>Simple ratio based on value of opposite inductor and sum of both inductors</td><td>Squared ratio</td><td>Ratio of Squares multiplied by a lower constant</td></tr><tr><td style='text-align:right;' ><strong>Tracking Forward</strong></td><td>Accurate</td><td>Inaccurate</td><td>Accurate</td></tr><tr><td style='text-align:right;' ><strong>Details</strong></td><td>Smooth movement but unable to make sharp turns. Steers off course at sharp turns</td><td>Slightly more exaggerated difference between motors  than option 1, but is problematic for certain voltage values</td><td>Movement is less smooth, but can handle all sharp turns. Multiplying it by a lower constant helped with smoothness.</td></tr></tbody></table></figure><p><em>Table 3.2: PWM Methods for Right Motor</em></p><p><strong>Design Decision</strong>
We chose to use the 3rd ratio because it is the most versatile and exaggerates the difference between the left motor and the right motor. Although the movement is not as smooth, we decided functionality is more important.</p><h3><a name='header-n176' class='md-header-anchor '></a>Detailed Design</h3><p>Before starting on any circuits, we had to decide upon a microcontroller to use for our Guideline Wire Generator (A.K.A. Guide wire generator) and Robot Controller. We quickly decided upon the C8051F38C (F38x) <sup class='md-footnote'><a href='#dfref-footnote-7' name='ref-footnote-7'>7</a></sup> for the Robot Controller due to our level of familiarity with it and its overall power to cost ratio.</p><p>We then decided upon the ATMega328P[8] for the Guide Wire Generator. The reasons associated with the choice are outlined as follows:</p><ul><li>It met the criteria for a different style of microcontroller as outlined in the requirements (8051/AVR)</li><li>It did not need to be soldered to a perfboard</li><li>It did not need to be put into bootloader mode every time it needed to be flashed</li><li>It is a popular microprocessor and has plenty of documentation and support online</li><li>It had a clock speed that,  while slower than other available chips, was more than sufficient for our needs</li></ul><h3><a name='header-n190' class='md-header-anchor '></a>Guideline Wire Controller (Guide Wire Generator)</h3><h4><a name='header-n191' class='md-header-anchor '></a>Overview</h4><p>The purpose of this controller is to provide a square wave signal at resonance frequency in the guide wire the robot is tracking. </p><p>ATMega328P is flashed in the identical fashion as the AT89LP52 from project 1. It is connected to a computer via BO230XS such as in figure B-1. One exception is that ATMega328P only needs the ‘reset’ button as the microcontroller does not need to be put into bootloader mode manually (mentioned above). This enables much more efficient development flow.</p><p>The software for the guide wire generator is split into multiple C files and the files are compiled using <em>avr-gcc</em> and <em>make</em> in <em>CrossIDE</em>.</p><h4><a name='header-n195' class='md-header-anchor '></a>Signal Generation</h4><p>ATMega328P has 3 timers/counters: two synchronous timer (Timer 0 and Timer 1) and one asynchronous timer (Timer 2). Timer 0 is configured to raise an interrupt at 32.0 kHz. By simply toggling the digital pin 9 (pin D9 in figure B-1 in the <a href='#header-n540'><em>appendix</em></a>) on every Timer 0 interrupt, a 16.0 kHz square wave is generated in the guide wire.</p><p>Timer 0 interrupts has the highest priority out of all other timers. This ensures that a consistent 16.0 kHz is transmitted regardless of other functions in the program onboard.</p><h4><a name='header-n198' class='md-header-anchor '></a>Guide Wire Communication</h4><p>We are prohibited to communicate with the guide wire tracking robot via wired communication such as direct control, SPI, etc. We are also prohibited from using RF (wireless) communication such as bluetooth, WiFi, infrared, etc. Thus, commands are sent to the robot through the guide wire. When proper input is given by the user, commands are sent through the guide wire every 1 second.</p><p>To start sending commands, which are comprised of bits, the 16.0 kHz is first turned off for 64.0 ms. This counts as a ‘0’ bit and tells the track robot to start receiving bits. Then the 16.0 kHz is turned back on for 64.0 ms to synchronize timing on the track robot, allowing the following bits to be read consistently. </p><p>The next three bits are the “real” data bits that contains the command code. Since we are sending 6 commands, 3 bits (maximum 8 different commands) are deemed appropriate. The 16.0 kHz signal will be turned on or off depending on if the bit that is currently being sent is 0 or 1. Their transfer rates are all also 64.0 ms per bit.</p><h4><a name='header-n202' class='md-header-anchor '></a>User I/O</h4><p>User determines the commands being sent to the robot using buttons and a joystick. The joystick is basically an assembly of two potentiometers and they are connected to Analog 0 (A0) and Analog 1 (A1) pins on the ATMega328P. The x-axis and y-axis analog signal is read by the onboard ADC. Two buttons are connected to two digital input pins for two more commands.</p><p>An LCD is attached to the guide wire generator to display the current command being sent. If no command is given, the LCD will display “Awaiting commands”. The attached LED also strobes the individual bits when the microcontroller is transmitting a command. </p><h3><a name='header-n205' class='md-header-anchor '></a>Magnetic Field Tracking Robot</h3><h4><a name='header-n206' class='md-header-anchor '></a>Tank Circuit</h4><p>We used 1.0 µF capacitors in our LC (tank) circuits because they were inexpensive and readily available. To ensure that the signal picked up by the inductors would be the same as the generated signal, we used the formula for resonance frequency as shown below to calculate a guide wire frequency of 16.0 kHz.</p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n208" cid="n208" mdtype="math_block"><div class="md-rawblock-container md-math-container" tabindex="-1"><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="111.181px" height="50.0521px" viewBox="0 -1409.3 5590.6 2517" role="img" focusable="false" style="vertical-align: -2.573ex; max-width: 100%;"><defs><path stroke-width="0" id="E1-MJMATHI-66" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path><path stroke-width="0" id="E1-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E1-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="0" id="E1-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path stroke-width="0" id="E1-MJMATHI-3C0" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z"></path><path stroke-width="0" id="E1-MJMATHI-4C" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path stroke-width="0" id="E1-MJMATHI-43" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path stroke-width="0" id="E1-MJMAIN-221A" d="M95 178Q89 178 81 186T72 200T103 230T169 280T207 309Q209 311 212 311H213Q219 311 227 294T281 177Q300 134 312 108L397 -77Q398 -77 501 136T707 565T814 786Q820 800 834 800Q841 800 846 794T853 782V776L620 293L385 -193Q381 -200 366 -200Q357 -200 354 -197Q352 -195 256 15L160 225L144 214Q129 202 113 190T95 178Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E1-MJMATHI-66" x="0" y="0"></use><use xlink:href="#E1-MJMAIN-3D" x="827" y="0"></use><g transform="translate(1605,0)"><g transform="translate(397,0)"><rect stroke="none" width="3467" height="60" x="0" y="220"></rect><use xlink:href="#E1-MJMAIN-31" x="1483" y="676"></use><g transform="translate(60,-890)"><use xlink:href="#E1-MJMAIN-32" x="0" y="0"></use><use xlink:href="#E1-MJMATHI-3C0" x="500" y="0"></use><g transform="translate(1073,0)"><use xlink:href="#E1-MJMAIN-221A" x="0" y="63"></use><rect stroke="none" width="1441" height="60" x="833" y="803"></rect><g transform="translate(833,0)"><use xlink:href="#E1-MJMATHI-4C" x="0" y="0"></use><use xlink:href="#E1-MJMATHI-43" x="681" y="0"></use></g></g></g></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">f=\frac{1}{2\pi\sqrt{LC}}</script></div></div><p>To increase the resolution of the data we received, we amplified the output voltage from each tank circuit by a factor of <span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.906ex" height="1.994ex" viewBox="0 -755.9 2973.6 858.4" role="img" focusable="false" style="vertical-align: -0.238ex;"><defs><path stroke-width="0" id="E6-MJMATHI-3B1" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path><path stroke-width="0" id="E6-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E6-MJMAIN-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path stroke-width="0" id="E6-MJMAIN-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E6-MJMATHI-3B1" x="0" y="0"></use><use xlink:href="#E6-MJMAIN-3D" x="917" y="0"></use><g transform="translate(1973,0)"><use xlink:href="#E6-MJMAIN-33"></use><use xlink:href="#E6-MJMAIN-34" x="500" y="0"></use></g></g></svg></span><script type="math/tex">\alpha=34</script> using the formula, <span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.488ex" height="3.511ex" viewBox="0 -1057.4 4946.2 1511.8" role="img" focusable="false" style="vertical-align: -1.055ex;"><defs><path stroke-width="0" id="E7-MJMATHI-3B1" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path><path stroke-width="0" id="E7-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E7-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="0" id="E7-MJMAIN-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path stroke-width="0" id="E7-MJMATHI-52" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path stroke-width="0" id="E7-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E7-MJMATHI-3B1" x="0" y="0"></use><use xlink:href="#E7-MJMAIN-3D" x="917" y="0"></use><use xlink:href="#E7-MJMAIN-31" x="1973" y="0"></use><use xlink:href="#E7-MJMAIN-2B" x="2695" y="0"></use><g transform="translate(3473,0)"><g transform="translate(342,0)"><rect stroke="none" width="1010" height="60" x="0" y="220"></rect><g transform="translate(76,510)"><use transform="scale(0.707)" xlink:href="#E7-MJMATHI-52" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="#E7-MJMAIN-32" x="1073" y="-213"></use></g><g transform="translate(60,-388)"><use transform="scale(0.707)" xlink:href="#E7-MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E7-MJMAIN-31" x="759" y="0"></use></g></g></g></g></svg></span><script type="math/tex">\alpha=1+\frac{R_2}{R1}</script>. To capture only the needed peak voltage data points we built a peak detector to create a DC signal of peak voltage that was then read by the microcontroller.The final diagram  for the combined Tank, Op Amp and Peak Detector circuit is included in the <a href='#header-n545'>appendix</a>.</p><h4><a name='header-n210' class='md-header-anchor '></a>Commands Interpretation</h4><h5><a name='header-n211' class='md-header-anchor '></a>Hardware</h5><p>In order to receive commands quickly and consistently, we chose to use a digital input rather than an analog input (ADC reading). The chosen software algorithm required the following: the receiver must receive commands at 15.625 Hz (64.0 ms per bit) , and the input voltage must meet the requirements for a digital reading (0 V for logic 0 and 5 V for logic 1). Based on these two requirements, we designed our receiver using a combination of two comparators and one rectifier <sup class='md-footnote'><a href='#dfref-footnote-8' name='ref-footnote-8'>8</a></sup> circuit. The diagram for the receiver is shown in the <a href='#header-n545'>appendix</a>.</p><p>The first comparator has two functions. First, it transforms a sine wave to a steady square wave. Second, and more importantly, it separates the current from other circuits (e.g. peak detector).  We found through testing that the rectifier drains current from the circuit and had a large negative effect on peak detector readings when tested without this comparator.</p><p>The rectifier transforms the AC square wave to a DC signal. The AC square wave at 16.0 kHz must be smoothed out by a capacitor to a steady DC signal. At the same time, the capacitor must also discharge fast enough to differentiate the “on” and “off” DC signals from turning on and off the AC square wave at 15.625 Hz. After testing various options, we concluded that using 4.7 µF capacitor was the best fit. Command transmissions from the guide wire controller were also slowed down from 100 Hz to 15.625 Hz. </p><p>Another comparator was used to boost the maximum voltage of the rectifier output from 2.2 V to 5 V in order to properly indicate logic 1 while maintaining the same frequency.This allowed us to meet the software requirements without compromising any other parts of the circuit.</p><h5><a name='header-n216' class='md-header-anchor '></a>Software</h5><p>Our initial design for receiving commands uses UART. However, we found that determining the baud rate for transmitting data is difficult since UART acts as a black box to us. Implementing UART required several issues to be addressed, including noise. This plan requires ample research effort so for the sake of time, we decided to choose the method described below.</p><p>Each incoming command from the guide wire begins with a logic 0 detected by an input from the comparator. This triggers the robot to actively read the binary sequence that follows. Commands are read through sampling. Each binary bit is sent for a period of exactly 64.0 ms, and the most accurate way to read the bit is at the midpoint of 32.0 ms.</p><p>There is a logic 0 bit followed by a logic 1 bit which acts as a accurately timed trigger before each command. To offset the delay of polling for logic 0, the robot will wait for a logic 1 once the function has been triggered. This essentially synchronizes the robot with the guide wire controller.</p><p>Next, the function will wait for 96.0 ms (1.5 times 64.0 ms) to be at the center of the next bit, and 64.0 ms to be at the center of each following bit. The function reads 4 consecutive bits, stores them into a single 8-bit variable, and compares it against the database of commands. Finally, a new command is returned only if it matched with a known command. </p><p>This method allowed us to easily adjust the code to match the baud rate of transmitted data unlike UART. </p><h4><a name='header-n222' class='md-header-anchor '></a>Robot Controller</h4><p><em>Table 3.3: States</em></p><figure><table><thead><tr><th style='text-align:left;' >States</th><th>Description</th></tr></thead><tbody><tr><td style='text-align:left;' >1</td><td>Tracking forward</td></tr><tr><td style='text-align:left;' >2</td><td>Tracking backward</td></tr><tr><td style='text-align:left;' >3</td><td>Stopped</td></tr></tbody></table></figure><p><em>Table 3.4: Visualization of Signal in the Guide Wire During Commands Transmission</em></p><figure><table><thead><tr><th style='text-align:left;' >Command</th><th>Received Signal</th><th>Bits</th><th>Description</th></tr></thead><tbody><tr><td style='text-align:left;' >0</td><td><img src='assets/ELEC291P2 Report/squareCmd0.png' alt='' referrerPolicy='no-referrer' /></td><td>11-111</td><td>No command</td></tr><tr><td style='text-align:left;' >1</td><td><img src='assets/ELEC291P2 Report/squareCmd1.png' alt='' referrerPolicy='no-referrer' /></td><td>01-001</td><td>Turn left at the next detected intersection</td></tr><tr><td style='text-align:left;' >2</td><td><img src='assets/ELEC291P2 Report/squareCmd2.png' alt='' referrerPolicy='no-referrer' /></td><td>01-010</td><td>Turn right at the next detected intersection</td></tr><tr><td style='text-align:left;' >3</td><td><img src='assets/ELEC291P2 Report/squareCmd3.png' alt='' referrerPolicy='no-referrer' /></td><td>01-011</td><td>Switch to tracking forward</td></tr><tr><td style='text-align:left;' >4</td><td><img src='assets/ELEC291P2 Report/squareCmd4.png' alt='' referrerPolicy='no-referrer' /></td><td>01-100</td><td>Switch to tracking backward</td></tr><tr><td style='text-align:left;' >5</td><td><img src='assets/ELEC291P2 Report/squareCmd5.png' alt='' referrerPolicy='no-referrer' /></td><td>01-101</td><td>U-Turn (turn 180 degrees)</td></tr><tr><td style='text-align:left;' >6</td><td><img src='assets/ELEC291P2 Report/squareCmd6.png' alt='' referrerPolicy='no-referrer' /></td><td>01-110</td><td>Stop</td></tr></tbody></table></figure><p>We classified every function of the robot as either a state or a command as described in the table above. Commands take higher priority than states. The robot will check if there are any incoming commands from the guide wire generator (as explained in the previous section) and then enter the function associated with its current state. The robot then executes the current command, resets the command to 0, and loops back to the function associated with its current state. In the case of left and right turns, the robot cannot execute the functions immediately so the command is kept and executed if an intersection is sensed. The command is returned to 0 when the turn has occurred or the command can be overwritten by another sent command.</p><p>In each loop, the robot checks for sonar readings. If an object is picked up by the sonar to be less than 7 cm away, the robot will execute the stop function as a safety measure and wait until the object has been removed to resume its previous state.</p><p>Also in each loop, the current command of the robot is displayed onto an LED matrix. The state of “stopped” is also displayed onto this LED matrix. In the case of left and right turns, signal LED lights are set to blink.</p><p>While the command is 0 the robot is also searching for intersections. The combined high voltages of the inductors signal an intersection and trigger a function that ensures the robot continues straight through the intersection.</p><h4><a name='header-n283' class='md-header-anchor '></a>Motor Adjustments</h4><p>To run and adjust the power output to our motors, we built two H-Bridge circuits. To control the speed of the motors, we used Pulse-width modulation (PWM). As a result of changing the duty cycle of the square wave outputted to the H-Bridge circuits, the speed of the motors change. The ratio used for PWM is as follows:</p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n285" cid="n285" mdtype="math_block"><div class="md-rawblock-container md-math-container" tabindex="-1"><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="176.198px" height="57.0486px" viewBox="0 -1660.6 8859.8 2868.8" role="img" focusable="false" style="vertical-align: -2.806ex; max-width: 100%;"><defs><path stroke-width="0" id="E2-MJMATHI-3BB" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path stroke-width="0" id="E2-MJMATHI-4C" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path stroke-width="0" id="E2-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="0" id="E2-MJMAIN-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path stroke-width="0" id="E2-MJMAIN-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path stroke-width="0" id="E2-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E2-MJMATHI-56" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path stroke-width="0" id="E2-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path stroke-width="0" id="E2-MJMAIN-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path stroke-width="0" id="E2-MJMATHI-52" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E2-MJMATHI-3BB" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E2-MJMATHI-4C" x="824" y="-213"></use><use xlink:href="#E2-MJMAIN-3D" x="1442" y="0"></use><g transform="translate(2498,0)"><use xlink:href="#E2-MJMAIN-37"></use><use xlink:href="#E2-MJMAIN-35" x="500" y="0"></use></g><use xlink:href="#E2-MJMAIN-D7" x="3720" y="0"></use><g transform="translate(4498,0)"><g transform="translate(342,0)"><rect stroke="none" width="3899" height="60" x="0" y="220"></rect><g transform="translate(1310,785)"><use xlink:href="#E2-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E2-MJMAIN-32" x="1166" y="487"></use><use transform="scale(0.707)" xlink:href="#E2-MJMATHI-4C" x="824" y="-451"></use></g><g transform="translate(60,-782)"><use xlink:href="#E2-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E2-MJMAIN-32" x="1166" y="487"></use><use transform="scale(0.707)" xlink:href="#E2-MJMATHI-4C" x="824" y="-451"></use><use xlink:href="#E2-MJMAIN-2B" x="1500" y="0"></use><g transform="translate(2500,0)"><use xlink:href="#E2-MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E2-MJMAIN-32" x="1166" y="487"></use><use transform="scale(0.707)" xlink:href="#E2-MJMATHI-52" x="824" y="-451"></use></g></g></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">\lambda_L=75\times\frac{V_L^2}{V_L^2+V_R^2}</script></div></div><p>Left and right turn commands are  activated by an intersection. The robot first moves straight forwards for 300 ms  until it is directly on top of the intersection. Then, one motor is set to 50 PWM forwards while the other is set to 0, allowing the robot to pivot in place. The robot turns for 200 ms in order to move the rear inductors off the current track, and continues to turn until the rear detectors sense the new track. From here, the robot continues on with its current state.</p><p>Turns while moving backwards are similar; the difference is that the robot will move backwards to be directly on top of the intersection and the PWM is set in the opposite direction. The command is still dependent on the rear inductors to sense the new track. The rear inductors were chosen to sense the end of a turn because they are farther from the wheels, thus farther from the intersection and reading more accurate voltage values. </p><p>When crossing intersections with no current command, the robot should continue forwards. As the intersection interferes with line tracking, it is difficult to predict at which angle the robot will enter the intersection. For example, the robot might sense the intersection while at a 45 degree angle to the line it’s currently tracking and steer off track. In order to prevent this, we assess which rear inductor is higher and turn the robot slightly as it moves through the intersection to adjust. If the right rear inductor has a higher voltage than the left rear inductor, we know the robot is entering the intersection pointing slightly to the right. We then can easily adjust for this by setting the left PWM to 25 and the right PWM to 50 so the robot can resume line tracking properly once it has exited the intersection.</p><p>Finally, our function to rotate the robot by 180 degrees sets PWM values to be equal in magnitude but opposite in direction which allows the robot to spin in one spot. The robot spins for 2 seconds, long enough so the sensors are no longer on the track, and then continue until the sensors sense that the robot is once again on track. At this point, the robot will continue with its previous movements.</p><h3><a name='header-n290' class='md-header-anchor '></a>Solution Assessment</h3><p>Our team conducted different types of testing to ensure that our design could meet requirements efficiently. Once our final design was built for both the guide wire generator and our robot, we recorded testing data. The data was generated by testing commands sent through the guide wire generator while our robot’s power was supplied by batteries.</p><p>We tested for quality of our robot with our Turn Test (see appendix), where we scored our robot’s turns between 1-10. Scoring below a 5 indicated a failure (i.e did not make the turn), and above 5 indicated a pass. For example, a score of 6 meant our robot made the turn but drove off track and readjusted itself, while a 10 meant the robot executed a perfect turn.</p><p>We tested the consistency of our robot with a Consistency Test (see appendix). This test was pass or fail, depending on whether the robot’s execution of a command was successful.</p><p>A strength of our design was consistency. When our robot was at its prime voltage level (around 8 V), the rate of successful execution was 100% (out of 5 trials).</p><p>A weakness of our design was accuracy of turns at different levels of voltage. When the voltage levels were too high (i.e after replacing the battery in our robot), the robot would overshoot turns due to the motors drawing in more current. Similarly, low voltage levels would get our robot stuck during turns due to the motors being too weak to carry the robot’s wheels across the wire.</p><h2><a name='header-n296' class='md-header-anchor '></a>4. Lifelong Learning</h2><p>We learned how to test for broken MOSFETs through online resources. The steps he used are as followed:</p><ol start='' ><li>Use a multimeter set in diode mode</li><li>Connect the gate and drain of the MOSFET to the multimeter</li><li>If a voltage can be read by the multimeter; then a current is running through it and therefore the diode inside must be broken</li></ol><p>Additionally, the course ELEC211: Engineering Electro-magnetics was critical for this project; it helped our team better understand magnetic fields, and the course inspired our design decision to place our inductors at 45 degree angles.</p><h2><a name='header-n306' class='md-header-anchor '></a>5. Conclusion</h2><p>The foundation of our wire-guided robot was an light aluminum chassis, built to house a breadboard, two motors, inductors, and batteries. Our design features four inductors, two at the front of the robot and two at the back, placed strategically at 45 degrees to the guide wire on the bottom of the chassis to detect intersections, track the wire and navigate intersections both forwards and backwards.</p><p>The first breadboard includes circuits to find the amplified peak voltage of each front inductor, H-Bridge circuits for motor control, an F38x microcontroller, and a data transmission comparator circuit.</p><p>An additional smaller breadboard is mounted above the first to include peak detector circuits for the rear inductors.  Information from all detection circuitry is sent to the F38x where tracking algorithms are used to control the motors’ direction and power.</p><p>One final breadboard which is isolated from the main setup includes an ATMega328P microcontroller to send commands through the wire to the robot, and a joystick controller for user command input.</p><p>Six different commands can be sent to the robot to execute through the main tracking wire. The robot then recognizes each different command by its binary signature and either stores the command or executes it immediately.</p><p>Bonus features include sonar to detect objects on the wire path, an LED matrix which displays the current command the robot is executing, brake lights, running lights, and signal lights for turn commands. The robot is controlled using a knob controller in combination with a push button to execute all 6 commands.</p><p>There were various problems encountered and overcome in this project. The major problem was intersection navigation, while minor problems included reliability of peak detection circuitry, and the inductors shorting by touching the aluminum chassis and inducing voltages on each other. The amount of time spent on this project averaged 60-70 hours per person.</p><h2><a name='header-n314' class='md-header-anchor '></a>6. Bibliography</h2><blockquote><p>LiteOn Incorporated,“LTV847 Optocoupler,” LiteOn Incorporated LTV817 Series Datasheet, April. 2010[Revision: K]</p><p>National Semiconductor,&quot;LMC7660IN Switched Capacitor Voltage Converter,&quot; LMC7660 Switched Capacitor Voltage Converter Datasheet, Feb. 2005</p><p>STMicroelectronics,”L7805CV Positive Voltage Regulator,” STMicroelectronics L78 Series Datasheet, June. 2004[Revised Nov. 2016]</p><p>Fairchild Semiconductor International Inc,”FQP8P10 P-Channel QFET MOSFET,” Fairchild Semiconductor FQP8P10 P-Channel QFET MOSFET Datasheet, 2002[Revised Mar. 2013]</p><p>Fairchild Semiconductor International Inc,”FQP13N06L N-Channel QFET MOSFET,” Fairchild Semiconductor FQP13N06L N-Channel QFET MOSFET Datasheet, 2001[Revised Nov. 2013]</p></blockquote><h2><a name='header-n321' class='md-header-anchor '></a>Appendix</h2><h3><a name='header-n322' class='md-header-anchor '></a>A. Detailed Parts List</h3><h4><a name='header-n323' class='md-header-anchor '></a>Microcontroller</h4><figure><table><thead><tr><th>Qty</th><th>Part Number</th><th>Description</th><th>Manufacturer</th></tr></thead><tbody><tr><td>1</td><td>C8051F38C</td><td>8051 microcontroller</td><td>Silicon Laboratories, Inc.</td></tr><tr><td>1</td><td>ATMega328P</td><td>AVR microcontroller</td><td>Atmel Corporation</td></tr></tbody></table></figure><h4><a name='header-n340' class='md-header-anchor '></a>Robot Assembly</h4><figure><table><thead><tr><th>Qty</th><th>Part</th><th>Manufacturer</th></tr></thead><tbody><tr><td>1</td><td>Custom waterjet cut aluminum chassis</td><td>&nbsp;</td></tr><tr><td>2</td><td>GM4 Clear servo motor</td><td>Solarbotics</td></tr><tr><td>2</td><td>Servo 2.63&quot; x 0.35&quot; wheel</td><td>Lynxmotion</td></tr><tr><td>1</td><td>70144 ball caster</td><td>Tamiya</td></tr><tr><td>4</td><td>AA battery holder</td><td>&nbsp;</td></tr><tr><td>1</td><td>9V battery clip</td><td>&nbsp;</td></tr></tbody></table></figure><h4><a name='header-n370' class='md-header-anchor '></a>Robot</h4><figure><table><thead><tr><th>Qty</th><th>Part Number</th><th>Description</th><th>Manufacturer</th></tr></thead><tbody><tr><td>1</td><td>LTV847</td><td>Optocoupler</td><td>LiteOn Incorporated</td></tr><tr><td>2</td><td>LMC7660IN</td><td>Switched Capacitor Voltage Converter</td><td>National Semiconductor</td></tr><tr><td>4</td><td>LM358AN</td><td>Dual Operational Amplifier</td><td>Fairchild Semiconductor</td></tr><tr><td>1</td><td>L7805CV</td><td>Positive Voltage Regulator</td><td>STMicroelectronics</td></tr><tr><td>2</td><td>FQP8P10</td><td>P-Channel QFET MOSFET</td><td>Fairchild Semiconductor</td></tr><tr><td>2</td><td>FQP13N06L</td><td>N-Channel QFET MOSFET</td><td>Fairchild Semiconductor</td></tr><tr><td>4</td><td>5258-RC</td><td>1 mH inductor</td><td>Bourns Inc.</td></tr><tr><td>1</td><td>BL-M12X881</td><td>Red LED Matrix - 8x8 (32x32mm)</td><td>BETLUX</td></tr><tr><td>1</td><td>LM393N</td><td>Comparator</td><td>Texas Instruments</td></tr><tr><td>1</td><td>MAX7219</td><td>Serially Interfaced LED Driver</td><td>Maxim Integrated</td></tr><tr><td>1</td><td>HC-SR04</td><td>Ultrasonic Ranging Sensor</td><td>Sainsmart</td></tr><tr><td>4</td><td>&nbsp;</td><td>1 µF capacitor</td><td>&nbsp;</td></tr><tr><td>6</td><td>1N4007</td><td>General-Purpose Rectifier Diode</td><td>Fairchild Semiconductor</td></tr><tr><td>4</td><td>&nbsp;</td><td>10 µF 50 V capacitor</td><td>&nbsp;</td></tr><tr><td>4</td><td>&nbsp;</td><td>4.7 µF 50 V capacitor</td><td>&nbsp;</td></tr><tr><td>8</td><td>&nbsp;</td><td>1 kΩ 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>4</td><td>&nbsp;</td><td>47 kΩ 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>4</td><td>&nbsp;</td><td>33 kΩ 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>4</td><td>&nbsp;</td><td>100 kΩ 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>2</td><td>&nbsp;</td><td>5 mm yellow LED</td><td>&nbsp;</td></tr><tr><td>1</td><td>&nbsp;</td><td>5 cm red LED strip</td><td>&nbsp;</td></tr><tr><td>1</td><td>&nbsp;</td><td>5 cm white LED strip</td><td>&nbsp;</td></tr></tbody></table></figure><h4><a name='header-n487' class='md-header-anchor '></a>Guide Wire Generator</h4><figure><table><thead><tr><th>Qty</th><th>Part Number</th><th>Description</th><th>Manufacturer</th></tr></thead><tbody><tr><td>1</td><td>KY-023</td><td>Joystick controller</td><td>&nbsp;</td></tr><tr><td>1</td><td>BO230XS</td><td>Serial USB adaptor</td><td>Jesus Calvino-Fraga</td></tr><tr><td>1</td><td>ATS16B-E</td><td>16.0000 MHz CTS Quartz Crystal</td><td>CTS</td></tr><tr><td>1</td><td>SD1602H</td><td>LCD</td><td>Hitachi</td></tr><tr><td>1</td><td>&nbsp;</td><td>1 kΩ 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>1</td><td>&nbsp;</td><td>2 kΩ 1% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>1</td><td>&nbsp;</td><td>220 Ω 5% tolerance resistor</td><td>&nbsp;</td></tr><tr><td>2</td><td>&nbsp;</td><td>5 mm LED</td><td>&nbsp;</td></tr><tr><td>3</td><td>EVQ-11A04M</td><td>Tactile Switch (Pushbutton)</td><td>Panasonic</td></tr></tbody></table></figure><p>&nbsp;</p><h3><a name='header-n540' class='md-header-anchor '></a>B. Guideline Controller Circuit</h3><p><img src='assets/ELEC291P2 Report/gw0.JPG' alt='gw0' referrerPolicy='no-referrer' /></p><p><em>Figure B.1: Part 1 of the guide wire generator circuit: connections to the USB adapter</em></p><p><img src='assets/ELEC291P2 Report/gw1.JPG' alt='gw1' referrerPolicy='no-referrer' /></p><p><em>Figure B.2: Part 2 of the guide wire generator circuit: connections to all added components</em></p><h3><a name='header-n545' class='md-header-anchor '></a>C. Robot Circuit</h3><p><img src='assets/ELEC291P2 Report/rcc0.JPG' alt='rcc0' referrerPolicy='no-referrer' /></p><p><em>Figure C.1: Combined Tank, OpAmp and Peak Detector Circuit</em></p><p><img src='assets/ELEC291P2 Report/rcc1.GIF' alt='rcc1' referrerPolicy='no-referrer' /></p><p><em>Figure C.2: Comparator and Rectifier Circuit as Receiver</em></p><p><img src='assets/ELEC291P2 Report/rcc2.JPG' alt='rcc2' referrerPolicy='no-referrer' /></p><p><em>Figure C.3: Single H-Bridge Circuit</em></p><p><img src='assets/ELEC291P2 Report/rcc3.png' alt='rcc3' referrerPolicy='no-referrer' /></p><p><em>Figure C.4: Oscilloscope Output for Robot Controller Received Signals</em></p><h3><a name='header-n554' class='md-header-anchor '></a>D. Robot Logic</h3><p><img src='assets/ELEC291P2 Report/logic (copy).jpg' alt='logic (copy)' referrerPolicy='no-referrer' /></p><p><em>Figure D.1: Logic Diagram for Robot Controller</em></p><h3><a name='header-n557' class='md-header-anchor '></a>E. Test Data</h3><h3><a name='header-n558' class='md-header-anchor '></a>Turn Test Data</h3><figure><table><thead><tr><th style='text-align:center;' >Turn</th><th style='text-align:center;' >Entry #</th><th style='text-align:center;' >Forward Score (out of 10)</th><th style='text-align:center;' >Backward Score (out of 10)</th></tr></thead><tbody><tr><td style='text-align:center;' >Left</td><td style='text-align:center;' >1</td><td style='text-align:center;' >10</td><td style='text-align:center;' >10</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >2</td><td style='text-align:center;' >6</td><td style='text-align:center;' >9</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >3</td><td style='text-align:center;' >9</td><td style='text-align:center;' >8</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >4</td><td style='text-align:center;' >6</td><td style='text-align:center;' >9</td></tr><tr><td style='text-align:center;' >Right</td><td style='text-align:center;' >1</td><td style='text-align:center;' >8</td><td style='text-align:center;' >10</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >2</td><td style='text-align:center;' >9</td><td style='text-align:center;' >10</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >3</td><td style='text-align:center;' >10</td><td style='text-align:center;' >9</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >4</td><td style='text-align:center;' >10</td><td style='text-align:center;' >10</td></tr></tbody></table></figure><p><em>Table E.1: Turn Test Data</em></p><h3><a name='header-n606' class='md-header-anchor '></a>Forward Consistency Test Data<sup class='md-footnote'><a href='#dfref-footnote-9' name='ref-footnote-9'>9</a></sup></h3><figure><table><thead><tr><th>Trial</th><th>Straight</th><th>Left</th><th>Right</th><th>180</th></tr></thead><tbody><tr><td>1</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr><tr><td>2</td><td>✔️</td><td>✔️</td><td>&nbsp;</td><td>✔️</td></tr><tr><td>3</td><td>✔️</td><td>&nbsp;</td><td>✔️</td><td>✔️</td></tr><tr><td>4</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr><tr><td>5</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr></tbody></table></figure><p><em>Table E.2: Consistency Test Data for Forward Tracking</em></p><h3><a name='header-n645' class='md-header-anchor '></a>Backward Consistency Test Data</h3><figure><table><thead><tr><th>Trial</th><th>Straight</th><th>Left</th><th>Right</th><th>180</th></tr></thead><tbody><tr><td>1</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr><tr><td>2</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr><tr><td>3</td><td>✔️</td><td>&nbsp;</td><td>✔️</td><td>✔️</td></tr><tr><td>4</td><td>&nbsp;</td><td>✔️</td><td>&nbsp;</td><td>✔️</td></tr><tr><td>5</td><td>✔️</td><td>&nbsp;</td><td>✔️</td><td>✔️</td></tr></tbody></table></figure><p><em>Table E.3: Consistency Test Data for Backward Tracking</em></p><h3><a name='header-n684' class='md-header-anchor '></a>F. Software Source Code</h3><p><a href='https://github.com/FSXAC/ELEC291P2'>Source code is hosted on GitHub</a></p><div class='footnotes-area'  ><hr/>
<div class='footnote-line'><span class='md-fn-count'>1</span> Fairchild Semiconductor International Inc,”LM358AN  Dual Operational Amplifier,” Fairchild Semiconductor LM358AN  Dual Operational Amplifier Datasheet, April. 2010[Revision: 1.0.3]<a name='dfref-footnote-1' href='#ref-footnote-1' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>2</span> Texas Instruments Incorporated,”LM393N Low-Power, Low-Offset Voltage, Dual Comparators,” Texas Instruments Incorporated LMx93-N, LM2903-N Low-Power, Low-Offset Voltage, Dual Comparators Datasheet, Oct. 1999[Revised Dec. 2014]<a name='dfref-footnote-2' href='#ref-footnote-2' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>3</span> Bourns Inductive Components Inc,&quot;5258-RC 1 mH Inductor,&quot; Bourns Inductive Components Inc 52XX Series Inductors Datasheet, Jan. 2007 [Revised Feb. 2009]<a name='dfref-footnote-3' href='#ref-footnote-3' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>4</span> BETLUX,&quot;BL-M12X881 Red 8x8 LED Matrix,&quot; BETLUX BL-M12X881 LED DOT MATRIX Datasheet, No Date[Revision: V.2]<a name='dfref-footnote-4' href='#ref-footnote-4' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>5</span> Panasonic Corporation,&quot;EVQ-11A04M Light Touch Switch,&quot; Panasonic Corporation EQ11 Type Switches Datasheet, Oct. 2012<a name='dfref-footnote-5' href='#ref-footnote-5' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>6</span> Parallax Inc,”2-Axis Joystick,” Parallax Inc 2-Axis Joystick Datasheet, Jan 2012[Revision: 1.2]<a name='dfref-footnote-6' href='#ref-footnote-6' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>7</span> Silicon Laboratories Incorporated,”C8051F38C 8051-Family Microcontroller,” Silicon Laboratories Incorporated C8051F380/1/2/3/4/5/6/7/C Datasheet, Oct. 2013[Revision: 1.4]<a name='dfref-footnote-7' href='#ref-footnote-7' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>8</span> Fairchild Semiconductor International Inc,”1N4007 General-Purpose Rectifier” Fairchild Semiconductor 1N4001-1N4007 General-Purpose Rectifier Datasheet, 2003[Revised Nov. 2014]<a name='dfref-footnote-8' href='#ref-footnote-8' title='back to document' class='reversefootnote' >↩</a></div>
<div class='footnote-line'><span class='md-fn-count'>9</span> The test is done under non-controlled varying battery voltage ranging from 7.4 V to 9.5 V<a name='dfref-footnote-9' href='#ref-footnote-9' title='back to document' class='reversefootnote' >↩</a></div></div></div>
</body>
</html>