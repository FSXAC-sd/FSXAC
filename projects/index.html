<!DOCTYPE html>
<html lang="en">
<head>
<title>Muchen :: Projects</title>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Muchen's page" />
<meta name="author" content="Muchen He" />
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<!-- css -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
<link type="text/css" rel="stylesheet" href="../css/default.css" />
<link type="text/css" rel="stylesheet" href="../css/timeline.css"/>
<!-- js -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script language="javascript" type="text/javascript" src="../js/default.js"></script>
<script language="javascript" type="text/javascript" src="projects.js"></script>
<style>
.jumbotron { background: #9F2D4F; }
</style>
</head>
<body id="root">
<script>addNavbar('Projects');</script>
<header class="jumbotron jumbotron-fluid px-3 py-5">
    <div class="container">
        <h1 class="display-4 text-light">Projects</h1>
        <p class="text-light">This page contains projects that I've created or contributed to. They are ordered reverse-chronicalogically.</p>
        <p class="text-light">The filter below to filter through different types of projects.</p>

        <section class="mt-3">
            <div id="year-listings" class="btn-group" role="group"></div>
            <div class='btn-group' role="group">
                <button id="filterSoftwareButton" class="btn btn-info">Software</button>
                <button id="filterHardwareButton" class="btn btn-primary">Hardware</button>
                <button id="filterDesignButton" class="btn btn-success">Design</button>
                <button id="filterMechanicalButton" class="btn btn-warning">Mechanical</button>
                <button id="clearFilterButton" class="btn btn-default">All</button>
            </div>
        </section>
    </div>
</header>
<div id='main' class="container"></div>
<div id='footer' class="container"></div>
<script>

$(document).ready(function() {
    setContainer($('#main'));
    addFooter('footer');
    readProjects(onReadProjects);
});

function onReadProjects() {
    setupFilterButtons();

    var timelineBlocks = $('.timeline-block');
    hideBlocks(timelineBlocks, offset);
    $(window).on('scroll', function () {
        blocksUpdateTrigger();
    });
}

function setupFilterButtons() {
    $("#filterSoftwareButton").on('click', function() { showExclusive('.timeline-icon-info') });
    $("#filterHardwareButton").on('click', function() { showExclusive('.timeline-icon-primary') });
    $("#filterDesignButton").on('click', function() { showExclusive('.timeline-icon-success') });
    $("#filterMechanicalButton").on('click', function() { showExclusive('.timeline-icon-warning') });
    $("#clearFilterButton").on('click', function() {
        $(".timeline-block").slideDown(200);
        $(".timeline").slideDown(200);
        $(".timeline").prev().slideDown(200);
    });
}

function showExclusive(className) {
    $(".timeline-block").each(function() {
        if ($(this).find(className).length != 0) {
            $(this).slideDown(200, function() { blocksUpdateTrigger(); });
        } else {
            $(this).slideUp(200, function() { blocksUpdateTrigger(); });
        }
    });
    $(".timeline").each(function() {
        if ($(this).find(className).length != 0) {
            $(this).slideDown(200);
            $(this).prev().slideDown(200);
        } else {
            $(this).slideUp(200);
            $(this).prev().slideUp(200);
        }
    })
}

var offset = 0.8;
function blocksUpdateTrigger() {
    var timelineBlocks = $(".timeline-block");
    if (!window.requestAnimationFrame) {
        setTimeout(function () {
            showBlocks(timelineBlocks, offset);
        }, 100);
    } else {
        window.requestAnimationFrame(function () {
            showBlocks(timelineBlocks, offset);
        });
    }
}

function hideBlocks(blocks, offset) {
    blocks.each(function () {
        ($(this).offset().top > $(window).scrollTop() + $(window).height() * offset) &&
            $(this).find('.timeline-icon, .timeline-body').addClass('is-hidden');
    });
}

function showBlocks(blocks, offset) {
    blocks.each(function () {
        ($(this).offset().top <= $(window).scrollTop() + $(window).height() * offset &&
            $(this).find('.timeline-icon').hasClass('is-hidden')) &&
            $(this).find('.timeline-icon, .timeline-body').removeClass('is-hidden').addClass('bounce-in');
    });
}

</script>
</body>
</html>